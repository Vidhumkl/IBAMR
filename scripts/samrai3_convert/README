(1) In the migration to SAMRAI3, the SAMRAI_MPI utility class no longer contains static functions. In order to use this class, one must now instantiate a SAMRAI_MPI object. We have introduced a class called IBTK_MPI that is the same as the SAMRAI2 SAMRAI_MPI class. It contains the same kinds of static functions except a few have been deleted. If you are using a SAMRAI_MPI call that is not supported by IBTK_MPI, this should result in a compile time error. The script samrai3_convert/update_mpi_calls.pl is a perl script that searches for SAMRA_MPI calls and replaces them with IBTK_MPI calls. It can be run using the following command: perl <script name> <directory to change>

As with all automatic code editing, please make sure you have a backup of your files before running this script.


(2) We have also introduced an initialization class IBTK_Init that will handle the startup and shutdown of the required libraries SAMRAI, PETSc, and libMesh as well as set the default MPI communicator used by IBTK_MPI. An IBTK_Init object should be created at the beginning of the main routine and destroyed at the end of main routine. To aid in the transition, we have provided a script to help with these changes. The perl script samrai3_convert/update_initializations.pl looks for SAMRAI, PETSc, and libMesh initializations and replaces them with the appropriate IBTK_Init call. This script was used to update all of the IBAMR and IBTK examples, but if you use a substantially different initialization style than the examples, this script may not work.
